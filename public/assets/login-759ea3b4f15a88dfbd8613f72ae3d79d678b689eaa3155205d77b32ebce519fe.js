$(function(){function e(){if(l&&"google"===r)if(clearInterval(o),null!=c){const e=c.getBasicProfile(),i={id:e.getId(),name:e.getName(),nickname:e.getName(),email:e.getEmail(),profile_image:e.getImageUrl()},n=c.getAuthResponse();MiilkAuth.setSocialToken("google",n,i),MiilkAuth.login(function(e,i){if(e){var n=a();location.href=n}else alert(i)})}else l=!1;else if(l)clearInterval(o),MiilkAuth.login(function(e,i){if(e){var n=a();location.href=n}else alert(i)});else if("naver"===r&&naver_id_login.oauthParams!==undefined){clearInterval(o);const e={id:naver_id_login.getProfileData("id"),name:naver_id_login.getProfileData("name"),nickname:naver_id_login.getProfileData("nickname"),email:naver_id_login.getProfileData("email"),age:naver_id_login.getProfileData("age"),birthday:naver_id_login.getProfileData("birthday"),gender:naver_id_login.getProfileData("gender"),profile_image:naver_id_login.getProfileData("profile_image")};MiilkAuth.setSocialToken("naver",naver_id_login.oauthParams,e),MiilkAuth.login(function(e,i){if(e){var n=a();location.href=n}else alert(i)})}}function i(e){auth2.attachClickHandler(e,{},function(e){c=e,l=!0},function(e){console.log(e),l=!0,clearInterval(o)})}function a(){var e=new URLSearchParams(window.location.search);return e.has("url")?e.get("url"):"/"}const n="e5d202fca4e87a85631146db398a689a",t="440930313176039";$(document).ready(function(){$.getScript("//developers.kakao.com/sdk/js/kakao.min.js",function(){Kakao.init(n)}),$.getScript("//connect.facebook.net/ko_KR/sdk.js",function(){FB.init({appId:t,xfbml:!0,cookie:!1,version:"v6.0"}),FB.AppEvents.logPageView()}),$.getScript("//apis.google.com/js/platform.js",function(){s()})}),$(".btn-container").click(function(e){e.preventDefault(),0!=$("#id").val().length?0!=$("#password").val().length?(MiilkAuth.setIdPassword($("#id").val(),$("#password").val()),MiilkAuth.login(function(e,i){if(e){var n=a();location.href=n}else alert(i)})):alert("\ud328\uc2a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."):alert("ID\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")});var o=null,l=!1,r=null;let c;$(".sns-login .item").click(function(i){i.preventDefault();const a=$(this).data("type");if(o=setInterval(e,1e3),"email"===a)clearInterval(o),location.href="/signup";else if("kakao"===a)Kakao.Auth.login({success:function(e){Kakao.API.request({url:"/v2/user/me",success:function(i){MiilkAuth.setSocialToken("kakao",e,i),l=!0},fail:function(){l=!0,clearInterval(o)}})},fail:function(){l=!0,clearInterval(o)}});else if("naver"===a){r="naver";var n=$("#naver_id_login_anchor")[0].href;window.open(n,"naverloginpop","titlebar=1, resizable=1, scrollbars=yes, width=600, height=550")}else"facebook"===a?FB.login(function(e){"connected"===e.status?(MiilkAuth.setSocialToken("facebook",e.authResponse,e),l=!0):(l=!0,clearInterval(o))}):"google"===a&&(r="google",s())}),$("#password").keypress(function(e){if(13===e.keyCode){if(e.preventDefault(),0==$("#id").val().length)return void alert("ID\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694");if(0==$("#password").val().length)return void alert("\ud328\uc2a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");MiilkAuth.setIdPassword($("#id").val(),$("#password").val()),MiilkAuth.login(function(e,i){if(e){var n=a();location.href=n}else alert(i)})}});var s=function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"246544490991-crfiaqauri720n18gj1l6om2s33sppo5.apps.googleusercontent.com",cookiepolicy:"single_host_origin",response_type:"permission id_token token"}),i(document.getElementById("g-signin2"))})}});